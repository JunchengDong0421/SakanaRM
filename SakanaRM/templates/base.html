<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>
        {% block title %}
            Sakana Reference Manager
        {% endblock %}
    </title>

    {% load static %}
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'ico/favicon.ico' %}">
    <link rel="stylesheet" href="{% static 'css/navbar.css' %}">

    {% block style %}
    {% endblock %}

</head>

<body>
    <div class="nav-bar">
        <a href="{% url 'core:about' %}">
            <img class="logo" src="{% static 'img/sakanarm-light.svg' %}" alt="">
            <span class="logo-name">SakanaRM</span>
        </a>
        <a class="home" href="{% url 'core:index' %}">Home</a>
        {% if request.user.is_superuser or not request.user.is_authenticated %}
            <a href="{% url 'accounts:login-register-page' %}">Login/Register</a>
        {% else %}
            <a href="{% url 'core:upload-paper-page' %}">Upload Paper</a>
            <a href="{% url 'core:process-paper-page' %}">Process Paper</a>
            <a href="{% url 'core:add-tag-definition-page' %}">Add Tag</a>
            <a href="{% url 'core:search-page' %}">Search</a>
            <a href="{% url 'core:my-papers' request.session.uid %}">My Papers</a>
            <a href="#">Tutorial</a>
            <div class="logout">Logout</div>
        {% endif %}
    </div>

    {% block content %}
    <h2> Replace with
        <span style="color: red">{% verbatim %} {% block content %} some content ... {% endblock %} {% endverbatim %}</span>
        in your template!
    </h2>
    {% endblock %}

    <script src={% static "js/jquery-3.7.1.min.js" %}></script>

    {% block scripts %}
    {% endblock %}

    <script>
        $(document).ready(() => {
            var logoutURL = "{% url 'accounts:logout-action' %}";
            $(".logout").click(() => {
                if (!confirm("Are you sure you want to logout?")) return;
                $.ajax({
                    url: logoutURL,
                    type: 'POST',
                    data: {
                        'csrfmiddlewaretoken': '{{ csrf_token }}',
                    },
                    success: () => {
                        location.reload();
                    }
                });
            });
        })
    </script>

</body>

</html>